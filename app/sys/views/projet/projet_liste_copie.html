<script>
    var dataTable;
    var projectData;

    var openDetails  = function(obj,id) {
        console.log(obj);
        console.log(id);
    }
    $(document).ready(function() {
        dataTable = $('#projet_table').DataTable( {
            "language": {
                "url": "assets/js/plugins/datatables/French.json"
            },
            "autoWidth": false,
            "processing": true,
            "serverSide": true,
            "ajax": "api/projet_liste.php",
            "stateSave": false,
            "columnDefs": [
                {
                    "render": function ( data ) {
                        html = '<a href="page=sousprojet&idprojet='+data+'" class="btn btn-xs btn-default" data-toggle="tooltip" title="ouvrir sous projets"><i class="fa fa-folder-open"></i></a>';
                        return html
                    },
                    "targets": 0
                },

            ]
        });

        /*var column = dataTable.column(0);
         column.visible(false);*/

        $("#add_sub_project,#update_project,#delete_project").addClass("disabled");

        $('#projet_table tbody').on( 'click', 'tr', function (evt) {
            var $table=$(evt.target).closest('table');
            if($table.attr('id').indexOf('projet_table') > -1) {
                var $cell=$(evt.target).closest('td');
                if( $cell.index()>0){
                    if ( $(this).hasClass('selected') ) {
                        $(this).removeClass('selected');
                        $('.linked').prop('disabled', true);
                        $("#add_sub_project,#update_project,#delete_project").addClass("disabled");
                    }
                    else {
                        dataTable.$('tr.selected').removeClass('selected');
                        $(this).addClass('selected');
                        $("#add_sub_project,#update_project,#delete_project").removeClass("disabled");
                        if(dataTable.row('.selected').data() != undefined)
                        {
                            $('.linked').prop('disabled', false);
                        }
                    }
                }
            }
        } );
    } );
</script>
<!-- Table projets -->
<div class="block">
    <div class="block-content">
        <!-- DataTables init on table by adding .js-dataTable-full class, functionality initialized in js/pages/base_tables_datatables.js -->
        <table id="projet_table" class="table table-bordered table-striped js-dataTable-full">
            <thead>
            <tr>
                <th class="no-sort"></th>
                <th>Id</th>
                <th class="hidden-xs">Info1</th><!--hidden-xs : hidden on extra small devices-->
                <th class="hidden-xs" style="width: 15%;">Info2</th>
                <th class="text-center" style="width: 10%;">Info3</th>
            </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
    </div>
</div>
<!-- END Table projets -->
<div style="display:none">
    <table id="detailsTable" class="table table-striped dt-head-left">
        <thead style="display: none;">
        <tr>
            <!--<th>DEP</th>
            <th>Ville</th>
            <th>Plaque</th>
            <th>Zone</th>-->
            <th>r√©f sous projet</th>
        </tr>
        </thead>
        <tbody></tbody>
    </table>
</div>
<!-- END Sub Projects Table (Details)-->