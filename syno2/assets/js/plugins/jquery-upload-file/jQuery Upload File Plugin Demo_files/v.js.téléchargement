/*
 *
 * C3 Metrics
 *
 * http://www.c3metrics.com
 * http://www.c3tag.com
 *
 * Copyright (c) 2008 - 2017 C3 Metrics, Inc. All Rights Reserved
 * Patent Pending
 * v.5.0.5
 *
 */
(function(e,t){var i=e.$C3;var r=function(e){return document.createElement(e)};if(typeof i==="undefined"||typeof i=="object"&&i.co!=="C3 Metrics"){i={co:"C3 Metrics",versionNo:"4.1.860",dnr_cids:[],valid_domains:["c3tag.com/","c3metrics.com/","trusteview.com/","truste.com/","channelcadence.com/","c3metrics.dev/"],valid_filenames:["v.js?","v1.js?"],vt_list:[],scripts:[],is_window_top:e==e.top,total_client_params:7,os:null,browser:{id:null,version:null},file:/\/v(1)?\.js/,viewport:{width:0,height:0,listener:null},pixel:{IMPRESSION:5,IMPRESSION_IFRAME:2,INVIEW:1,INVIEW_IFRAME:null},pixel_container:null,initialize:function(){var t=this;if(t.is_window_top){t.viewport.listener=t.setViewport();t.viewport.listener();t.setEventListener("resize",t.viewport.listener)}var i=e.navigator.userAgent;if(/Windows/.test(i)){t.os=1}else{if(/Macintosh/.test(i)){t.os=2}else{if(/Android/.test(i)){t.os=4}else{if(/Linux/.test(i)){t.os=3}else{if(/iPhone|iPad/.test(i)){t.os=5}}}}}if(/Edge[\/\s](\d+\.\d+)/.test(i)){t.browser.id=5;t.browser.version=+new Number(RegExp.$1)}else{if(/Firefox[\/\s](\d+\.\d+)/.test(i)){t.browser.id=1;t.browser.version=+new Number(RegExp.$1)}else{if(/MSIE (\d+\.\d+);/.test(i)||/Trident[\/\s](\d+\.\d+)/.test(i)){t.browser.id=9;t.browser.version=+new Number(RegExp.$1)}else{if(/Chrome[\/\s](\d+\.\d+)/.test(i)){t.browser.id=2;t.browser.version=+new Number(RegExp.$1)}else{if(/Safari/.test(i)){t.browser.id=3;/Version\/(.*)\s/.test(i);t.browser.version=parseInt(RegExp.$1)}else{if(/Opera\/(.*)\s/.test(i)){t.browser.id=4;t.browser.version=parseInt(RegExp.$1)}}}}}}t.pixel.INVIEW_IFRAME=""+t.os+t.browser.id+(t.browser.version<10?"0"+t.browser.version:t.browser.version)+"1";t.pixel_container=r("div");t.pixel_container.style.cssText="display:none;";document.body.appendChild(this.pixel_container)},addVT:function(e){if(e.constructor==i.VT){this.vt_list.push(e)}},findScript:function(e){var t=this,i=0,r=0,n=document.getElementsByTagName("script");for(var s=0;s<n.length;s++){var a=n[s];if(t.indexof(a,t.scripts)==-1){if(/MSIE 7\.0/.test(navigator.userAgent)){i=1}else{for(var o=0;o<t.valid_domains.length;o++){if(a.src.toLowerCase().search(t.valid_domains[o])!==-1){i=1;break}}}for(var c=0;c<t.valid_filenames.length;c++){if(a.src.toLowerCase().search(t.valid_filenames[c])!==-1){r=1;break}}if(i&&r){if(e){t.scripts.push(a)}return a}}else{}i=0;r=0}},c3_djb2:function(e){$hash=5381;$len=e.length;for($i=0;$i<$len;$i++){$hash=($hash<<5)+$hash+e[$i].charCodeAt(0)}return parseInt(Math.abs(Math.round($hash/$len)))},firePixel:function(i,n,s,a){var o=this,c=r("iframe");c.style.cssText="width:0;height:0;display:none;";document.cookie;if(!a){var l="iN="+n.id+"&cid="+escape(n.cid);if(n.c3AId!==t){l+="&c3aid="+n.c3AId}if(n.nid&&n.nid!==""&&(n.c3ch&&n.c3ch!=="")){l+="&nid=x-nid:"+escape(n.c3ch)+"<-ch-nid->"+escape(n.nid)}else{l+="&nid="+escape(n.nid)}for(var p=o.total_client_params;p;p--){if(n["param"+p]!==""){l+="&param"+p+"="+escape(n["param"+p])}}if(n.c3t0!==t){l+="&c3T0"}l+="&w="+e.screen.width+"&h="+e.screen.height;if(s){l+="&sT="+s}var d=document.currentScript;i+="?"+l;o.vtComplete()&&o.unsetEventListener("resize",o.viewport.listener)}c.src=i;o.pixel_container.appendChild(c)},d5:function(e,t){var i=e.split("?")[0];if(t){var r=i.split("/");r[r.length-1]=t;return r.join("/")}return i},indexof:function(e,i){if(i.length!==t){if(Array.prototype.indexOf){return i.indexOf(e)}else{for(var r=0;r<i.length;r++){if(i[r]===e){return r}}return-1}}return-1},setParams:function(e,t){var i=function(i){var r="&"+i+"=~{";if(t.indexOf(r)!==-1){var n=t.indexOf(r),s=t.indexOf("}~",n);e[i]=t.slice(n+r.length,s);t=t.slice(0,n)+t.slice(s+2)}};i("c3pxim");i("c3pxiv");i("c3pxvc");var r=t.split("?"),n=r[1].split("&");if(!n[1]||n[1]==""||r.length>2){return null}for(var s=0;s<n.length;s++){var a=n[s].split("="),o=a[0].toLowerCase(),c=a[1];switch(o){case"c3nid":case"id":case"ca":case"c3":o="nid";break;case"ci":o="cid";break;case"size":case"c3size":o="param1";break;case"campaign":case"c3campaign":o="param2";break;case"placement":case"c3placement":o="param3";break;case"creative":case"c3creative":o="param4";break;case"advertiser":case"c3advertiser":o="param5";break;case"ad":case"c3ad":o="param6";break;case"adid":case"c3adid":o="param7";break;case"c3_account_id":o="c3AId";break;case"partner_id":o="partID";break}e[o]=c||""}if(e.cid==""){return null}if(this.indexof(+e.cid,this.dnr_cids)!==-1){e.c3l0=1}return e},setViewport:function(){var t=this;return function(){if(typeof e.innerWidth!="undefined"){t.viewport.width=e.innerWidth;t.viewport.height=e.innerHeight}else{if(typeof document.documentElement!="undefined"&&typeof document.documentElement.clientWidth!="undefined"&&document.documentElement.clientWidth!=0){t.viewport.width=document.documentElement.clientWidth;t.viewport.height=document.documentElement.clientHeight}else{t.viewport.width=document.getElementsByTagName("body")[0].clientWidth;t.viewport.height=document.getElementsByTagName("body")[0].clientHeight}}}},setEventListener:function(t,i,r){e.addEventListener?e.addEventListener(t,i,r):e.attachEvent("on"+t,i)},unsetEventListener:function(t,i,r){e.removeEventListener?e.removeEventListener(t,i,r):e.detachEvent("on"+t,i)},vtComplete:function(){var e=this,t=0;if(!e.vt_list.length){return false}for(var i=0;i<e.vt_list.length;i++){if(e.vt_list[i].detected){t++}else{return false}}return t==e.vt_list.length}};i.initialize();e["$C3"]=i}function n(e,r){if(e.params.c3l0===t){i.firePixel(e.log_path,e.params,r)}if(e.client_pixels.inview){i.firePixel(e.client_pixels.inview,e.params,r,true)}if(e.params.c3vc!==t&&e.params.c3vc==1){i.firePixel(e.client_pixels.vc,e.params,r)}}i.VT=function(){var e=this;e.id=Math.floor(Math.random()*999999);e.detected=false;e.params={nid:"",cid:"",c3trx:"",param1:"",param2:"",param3:"",param4:"",param5:"",param6:"",param7:"",id:e.id};e.script_element=i.findScript(1);if(!i.setParams(e.params,e.script_element.src)){return null}var t=e.script_element.src.split("."),n=r("a");n.href=e.script_element.src;e.log_path=n.protocol+"//"+e.params.cid+"-vt."+(e.params.cid==345?"c3metrics":"c3tag")+"."+t[2].split("/")[0];var s=n.hostname.toLowerCase().indexOf("truste")!==-1;e.client_pixels={inview:null,impression:null};if(e.params.c3pxiv){e.client_pixels.inview=e.params.c3pxiv}if(e.params.c3pxim){e.client_pixels.impression=e.params.c3pxim}var a="cdn-view."+(e.params.cid==345?"c3metrics":"c3tag")+".com";s&&(a="view.truste.com");e.flash_html_path=n.protocol+"//"+a+"/interval_id.html";if(e.params.c3vc==1){if(e.params.c3pxvc){e.client_pixels.vc=e.params.c3pxvc}else{e.client_pixels.vc=n.protocol+"//ct."+(s?"truste":"c3tag")+".com/vccall.php"}}};if(!i.is_window_top){if(i.browser.id===2&&i.browser.version>=51)i.VT.prototype={constructor:i.VT,initialize:function(){var r=this;if(r.params.c3l0===t){i.firePixel(r.log_path,r.params,i.pixel.IMPRESSION);i.firePixel(r.log_path,r.params,i.pixel.IMPRESSION_IFRAME)}if(r.client_pixels.impression){i.firePixel(r.client_pixels.impression,r.params,i.pixel.IMPRESSION_IFRAME,true)}r.detect();var n;n=document.createElement("p");n.id="chromePxl";var s=(e.innerHeight-1)/2;var a=(e.innerWidth-1)/2;n.style.cssText="position:absolute;z-index:0;top:"+s+"px;left:"+a+"px;";document.body.insertBefore(n,document.body.firstChild);var o=function(e){return function(){e.detect(e)}};var c=new IntersectionObserver(o(r),{threshold:[.5]});c.observe(n);return this},detect:function(e){if(e!==t){setTimeout(function(){var t=new IntersectionObserver(function(){this.disconnect();if(!e.detected)n(e,i.pixel.INVIEW_IFRAME);e.detected=true},{threshold:[.5]});t.observe(document.getElementById("chromePxl"))},1e3);return false}}};else if(i.browser.id===1){i.VT.prototype={constructor:i.VT,initialize:function(){var e=this;if(e.params.c3l0===t){i.firePixel(e.log_path,e.params,i.pixel.IMPRESSION);i.firePixel(e.log_path,e.params,i.pixel.IMPRESSION_IFRAME)}if(e.client_pixels.impression){i.firePixel(e.client_pixels.impression,e.params,i.pixel.IMPRESSION_IFRAME,true)}e.detect();return this},detect:function(){var t=this;var r=e.mozRequestAnimationFrame||e.requestAnimationFrame||function(t){e.setTimeout(function(){t(+new Date)},10)};var s,a;s=document.createElement("canvas");a=s.getContext("2d");var o=(e.innerHeight-1)/2;var c=(e.innerWidth-1)/2;s.width=s.height=1;s.style.cssText="position:absolute;z-index:0;top:"+o+"px;left:"+c+"px;";a.fillStyle="transparent";document.body.insertBefore(s,document.body.firstChild);var l=0,p=0,d=0,f={},m=null,u=0,v=0,h=0,u;var g=function(){m=+new Date;f[m]=e.mozPaintCount>l?1:0;p=0;d=0;v=0;for(var r in f){if(r>=m-1100){if(f[r]==1){if(v==0){v=r}p++}else{d++}}}if(v<=m-1e3&&p>d){n(t,i.pixel.INVIEW_IFRAME);t.detected=true;return false}l=e.mozPaintCount};function x(){a.clearRect(0,0,s.width,s.height);a.fillRect(0,0,2,2);g()!==false&&r(x)}x()}}}else{i.VT.prototype={constructor:i.VT,initialize:function(){var t=this;if(t.flashCheck()&&!(/MSIE 10/.test(navigator.userAgent)&&e.navigator.userAgent.toLowerCase().indexOf("windows nt 6.2")!==-1)){t.setupIframe()}return this},flashCheck:function(){if(e.ActiveXObject){var t=null;try{t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(e){return false}if(t){var i=t.GetVariable("$version").substring(4);i=i.split(",");i=parseFloat(i[0]+"."+i[1]);return i}}else{for(var r=0;r<navigator.plugins.length;r++){if(/Shockwave Flash/.test(navigator.plugins[r].name)){/(\d+\.\d+)/.test(navigator.plugins[r].description);return parseFloat(RegExp.$1)}}return false}},setupIframe:function(){var e=this.script_element.src.split("?"),t="";for(var r=1;r<e.length;r++){t+=e[r];r!==e.length-1&&(t+="?")}t+="&iframeValue="+i.pixel.INVIEW_IFRAME;var n=document.createElement("iframe");n.id="c3";n.style.cssText="width:100%;height:100%;position:absolute;left:0;top:0;border:none;z-index:-1;";n.src=this.flash_html_path+"?"+t;document.body.appendChild(n)}}}}else{i.VT.prototype={constructor:i.VT,initialize:function(){var e=this;e.interval_id=null;var n=r("p");n.style.cssText="margin:0;padding:0;display:block;width:1px;height:1px;";e.script_element.parentNode.insertBefore(n,e.script_element.nextSibling);e.trigger={element:n,position_obj:{top:null,bottom:null,left:null,right:null}};e.listener={detect:e.detect(),domReady:function(){e.trigger.position_obj=e.insertBefore(e.trigger.element.offsetParent,0,0,e.trigger.element);e.listener.detect();i.setEventListener("scroll",e.listener.detect,false)}};document.readyState=="complete"?e.listener.domReady():i.setEventListener("load",e.listener.domReady,false);if(e.params.c3l0==t){i.firePixel(e.log_path,e.params,i.pixel.IMPRESSION)}if(e.client_pixels.impression){i.firePixel(e.client_pixels.impression,e.params,i.pixel.IMPRESSION,true)}return e},insertBefore:function(e,t,i,r){if(e.offsetParent){return this.insertBefore(e.offsetParent,t+e.offsetLeft,i+e.offsetTop,r)}else{return{top:parseInt(r.offsetTop+i),left:parseInt(r.offsetLeft+t),bottom:parseInt(r.offsetTop+i+r.offsetHeight),right:parseInt(r.offsetLeft+t+r.offsetWidth)}}},detect:function(){var e=this;var t=this.trigger.element;var r=document.compatMode&&document.compatMode!="BackCompat"?document.documentElement:document.body;return function(t){var s=e.trigger.position_obj;var a={left:document.all?r.scrollLeft:pageXOffset,top:document.all?r.scrollTop:pageYOffset};if(!e.detected&&!e.interval_id&&(s.bottom<=i.viewport.height&&s.right<=i.viewport.width||s.top<=i.viewport.height+a.top&&s.top>=a.top&&s.right<=i.viewport.width+a.left)){var o=function(){a={left:document.all?r.scrollLeft:pageXOffset,top:document.all?r.scrollTop:pageYOffset};if(s.top<=i.viewport.height+a.top&&s.top>=a.top&&s.right<=i.viewport.width+a.left){n(e,i.pixel.INVIEW);i.unsetEventListener("scroll",e.listener.detect);e.detected=true}else{e.interval_id=null}};e.interval_id=setTimeout(o,1e3)}}}}}var s=new i.VT;if(i.indexof(+s.params.cid,i.dnr_cids)===-1){i.addVT(s.initialize())}})(window);